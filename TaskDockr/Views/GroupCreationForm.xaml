<Window
    x:Class="TaskDockr.Views.GroupCreationForm"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Create New Group"
    Width="480" Height="320"
    WindowStartupLocation="CenterOwner"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    Background="#1E1E1E"
    Icon="/Assets/AppIcon.ico">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Group Name -->
        <TextBlock Grid.Row="0" Text="Group Name" FontWeight="SemiBold" Margin="0,0,0,6"
                   Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
        <TextBox Grid.Row="1"
                 x:Name="GroupNameBox"
                 Text="{Binding GroupName, UpdateSourceTrigger=PropertyChanged}"
                 Style="{StaticResource FluentTextBoxStyle}"
                 Margin="0,0,0,12" />

        <!-- Icon Selection -->
        <TextBlock Grid.Row="2" Text="Icon (optional)" FontWeight="SemiBold" Margin="0,0,0,6"
                   Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
        <Grid Grid.Row="3" Margin="0,0,0,8" VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <!-- Icon Preview -->
            <Border Grid.Column="0" Width="40" Height="40" CornerRadius="6"
                    Background="#2A2A2A" Margin="0,0,10,0"
                    VerticalAlignment="Center">
                <!-- FA glyph preview -->
                <TextBlock x:Name="IconPreviewGlyph"
                           FontSize="20" Foreground="White"
                           HorizontalAlignment="Center" VerticalAlignment="Center"
                           Visibility="Collapsed" />
            </Border>

            <!-- Display text -->
            <TextBlock Grid.Column="1" Text="{Binding IconDisplayText}"
                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                       VerticalAlignment="Center" FontSize="13"
                       TextTrimming="CharacterEllipsis" />

            <!-- Choose Icon button -->
            <Button Grid.Column="2" Content="Choose Icon"
                    Command="{Binding OpenIconPickerCommand}"
                    Style="{StaticResource DefaultButtonStyle}" />
        </Grid>

        <!-- Validation message -->
        <TextBlock Grid.Row="3" Text="{Binding ValidationError}"
                   Foreground="OrangeRed" FontSize="11"
                   VerticalAlignment="Bottom" Margin="0,0,0,4"
                   Visibility="{Binding ValidationError, Converter={StaticResource StringToVisibilityConverter}}" />

        <!-- Buttons -->
        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Cancel" Margin="0,0,8,0"
                    Command="{Binding CancelCommand}"
                    Style="{StaticResource DefaultButtonStyle}" />
            <Button Content="Create Group"
                    Command="{Binding SaveCommand}"
                    IsEnabled="{Binding IsValid}"
                    Style="{StaticResource AccentButtonStyle}" />
        </StackPanel>
    </Grid>
</Window>
