<UserControl
    x:Class="TaskDockr.Views.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:viewmodels="clr-namespace:TaskDockr.ViewModels">

    <UserControl.DataContext>
        <viewmodels:SettingsViewModel />
    </UserControl.DataContext>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <Button Content="â†" Width="32" Height="32" Margin="0,0,12,0"
                    Style="{StaticResource IconButtonStyle}"
                    Click="OnBackClick" />
            <TextBlock Text="Settings" FontSize="20" FontWeight="SemiBold"
                       VerticalAlignment="Center"
                       Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
        </StackPanel>

        <!-- Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Appearance -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                        BorderThickness="1" CornerRadius="8"
                        Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="Appearance" FontSize="16" FontWeight="SemiBold"
                                   Margin="0,0,0,12"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                        <TextBlock Text="Theme" FontSize="13" Margin="0,0,0,6"
                                   Foreground="{DynamicResource TextFillColorSecondaryBrush}" />
                <ComboBox x:Name="ThemeCombo" Width="200" HorizontalAlignment="Left"
                          SelectedIndex="{Binding SelectedThemeIndex, Mode=TwoWay}"
                          SelectionChanged="OnThemeChanged">
                    <ComboBoxItem Content="Dark" />
                    <ComboBoxItem Content="Light" />
                    <ComboBoxItem Content="Auto" />
                </ComboBox>
                    </StackPanel>
                </Border>

                <!-- Startup -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                        BorderThickness="1" CornerRadius="8"
                        Padding="16" Margin="0,0,0,12">
                    <StackPanel>
                        <TextBlock Text="Startup" FontSize="16" FontWeight="SemiBold"
                                   Margin="0,0,0,12"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                        <CheckBox Content="Minimize to tray on close"
                                  IsChecked="{Binding Config.Startup.MinimizeToTray, Mode=TwoWay}"
                                  Margin="0,0,0,6"
                                  Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                        <CheckBox Content="Launch on system startup"
                                  IsChecked="{Binding Config.Startup.LaunchOnSystemStartup, Mode=TwoWay}"
                                  Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                    </StackPanel>
                </Border>

                <!-- Backup -->
                <Border Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                        BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
                        BorderThickness="1" CornerRadius="8"
                        Padding="16">
                    <StackPanel>
                        <TextBlock Text="Backup &amp; Restore" FontSize="16" FontWeight="SemiBold"
                                   Margin="0,0,0,12"
                                   Foreground="{DynamicResource TextFillColorPrimaryBrush}" />
                        <StackPanel Orientation="Horizontal">
                            <Button Content="Create Backup" Margin="0,0,8,0"
                                    Command="{Binding CreateBackupCommand}"
                                    Style="{StaticResource AccentButtonStyle}" />
                            <Button Content="Restore Backup"
                                    Command="{Binding RestoreBackupCommand}"
                                    Style="{StaticResource DefaultButtonStyle}" />
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Footer buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button Content="Restore Defaults" Margin="0,0,8,0"
                    Command="{Binding RestoreDefaultsCommand}"
                    Style="{StaticResource DefaultButtonStyle}" />
            <Button Content="Save"
                    Command="{Binding SaveSettingsCommand}"
                    Style="{StaticResource AccentButtonStyle}" />
        </StackPanel>
    </Grid>
</UserControl>
